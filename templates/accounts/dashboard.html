
{% extends 'base.html' %}


{% block title %} | User Dashboard {% endblock %}


{% block content %}
  <section id="showcase-inner" class="py-5 text-white">
    <div class="container">
      <div class="row text-center">
        <div class="col-md-12">
          <h1 class="display-4">User Dashboard</h1>
          <p class="lead">Manage your LVS Builders and Developers account</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Breadcrumb -->
  <section id="bc" class="mt-3">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{% url 'index' %}">
              <i class="fas fa-home"></i> Home</a>
          </li>
          <li class="breadcrumb-item active"> Dashboard</li>
        </ol>
      </nav>
    </div>
  </section>


<!-- Message Alerts Start -->
    {% include 'partials/_alerts.html' %}
<!-- Message Alerts End -->


  <section id="dashboard" class="py-4">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h2>Welcome {{ user.first_name }}</h2><br><br>
          <h2>My Listings</h2>
<a href="{% url 'add_listing' %}" class="btn btn-primary">Add Listing</a>
<br><br>
{% if user_listings %}
<table class="table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for listing in user_listings %}
        <tr>
            <td>{{ listing.title }}</td>
            <td>{{ listing.status }}</td>
            <td>
                <a href="{% url 'edit_listing' listing.pk %}" class="btn btn-secondary">Edit</a>
                <a href="{% url 'delete_listing' listing.pk %}" class="btn btn-danger">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>You have no listings.</p>
{% endif %}
            {% if contacts %}
              <h3>Here are the property listings that you have inquired about</h3>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Property</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>

                    {% for contact in contacts %}
                      <tr>
                        <td>{{ contact.listing }}</td>
                        <td>
                          <a class="btn btn-light" href="{% url 'listing' contact.listing_id %}">View Listing</a>
                        </td>
                      </tr>
                    {% endfor %}

                </tbody>
              </table>

            {% else %}
                <p>You have not made any inquiries</p>
            {% endif %}

        </div>
      </div>
    </div>
  </section>
{% endblock %}